(self["webpackChunkapache_jena_fuseki"]=self["webpackChunkapache_jena_fuseki"]||[]).push([[612],{7483:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",{attrs:{fluid:""}},[n("b-row",{staticClass:"mt-4"},[n("b-col",{attrs:{cols:"12"}},[n("h2",[e._v("/"+e._s(this.datasetName))]),n("b-card",{attrs:{"no-body":""}},[n("b-card-header",{attrs:{"header-tag":"nav"}},[n("Menu",{attrs:{"dataset-name":e.datasetName}})],1),this.services["gsp-rw"]&&0!==this.services["gsp-rw"].length?n("b-card-body",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.$refs.upload&&e.$refs.upload.dropActive,expression:"$refs.upload && $refs.upload.dropActive"}],staticClass:"drop-active"},[n("h3",[e._v("Drop files to upload")])]),n("b-row",[n("b-col",{attrs:{sm:"12"}},[n("h3",[e._v("Upload files")]),n("p",[e._v("Load data into the default graph of the currently selected dataset, or the given named graph. You may upload any RDF format, such as Turtle, RDF/XML or TRiG.")]),n("b-form",[n("b-form-group",{attrs:{id:"dataset-graph-name-group",label:"Dataset graph name","label-for":"dataset-graph-name","label-cols":"12","label-cols-sm":"4","label-cols-md":"4","label-cols-lg":"2","label-size":"sm"}},[n("b-form-input",{attrs:{pattern:"[^\\s]+",oninvalid:"this.setCustomValidity('Enter a valid dataset graph name')",oninput:"this.setCustomValidity('')",id:"dataset-graph-name",type:"text",placeholder:"Leave blank for default graph",trim:""},model:{value:e.form.datasetGraphName,callback:function(t){e.$set(e.form,"datasetGraphName",t)},expression:"form.datasetGraphName"}})],1),n("b-form-group",{attrs:{id:"dataset-files",label:"Files to upload","label-for":"add-files-action-dropdown","label-cols":"12","label-cols-sm":"4","label-cols-md":"4","label-cols-lg":"2","label-size":"sm"}},[n("file-upload",{ref:"upload",staticClass:"btn btn-success",attrs:{"post-action":e.postActionUrl,extensions:e.upload.extensions,accept:e.upload.accept,multiple:e.upload.multiple,directory:e.upload.directory,size:e.upload.size||0,thread:e.upload.thread<1?1:e.upload.thread>5?5:e.upload.thread,headers:e.upload.headers,data:e.upload.data,drop:e.upload.drop,"drop-directory":e.upload.dropDirectory,"add-index":e.upload.addIndex},model:{value:e.upload.files,callback:function(t){e.$set(e.upload,"files",t)},expression:"upload.files"}},[n("FontAwesomeIcon",{attrs:{icon:"plus"}}),n("span",{staticClass:"ml-2"},[e._v("select files")])],1),e.$refs.upload&&e.$refs.upload.active?n("b-button",{staticClass:"ml-2 d-inline",attrs:{variant:"primary"},on:{click:function(t){t.preventDefault(),e.$refs.upload.active=!1}}},[n("FontAwesomeIcon",{attrs:{icon:"times-circle"}}),n("span",{staticClass:"ml-2"},[e._v("stop upload")])],1):n("b-button",{staticClass:"ml-2 d-inline",attrs:{variant:"primary"},on:{click:function(t){t.preventDefault(),e.$refs.upload.active=!0}}},[n("FontAwesomeIcon",{attrs:{icon:"upload"}}),n("span",{staticClass:"ml-2"},[e._v("upload all")])],1)],1)],1)],1)],1),n("b-row",[n("b-col",[n("b-table",{attrs:{fields:e.datasetTableFields,items:e.datasetTableItems,stacked:"lg","empty-text":"No files selected",bordered:"",fixed:"",hover:"","show-empty":""},scopedSlots:e._u([{key:"cell(size)",fn:function(t){return[e._v(" "+e._s(e.readableFileSize(t.item.size))+" ")]}},{key:"cell(speed)",fn:function(t){return[e._v(" "+e._s(e.readableFileSize(t.item.speed))+"/s ")]}},{key:"cell(status)",fn:function(t){return[n("b-progress",{attrs:{variant:e.getFileStatus(t.item),value:t.item.progress,max:100,precision:2,"show-progress":""}}),n("span",{staticClass:"small"},[e._v("Triples uploaded:Â ")]),t.item.response.tripleCount?n("span",{staticClass:"small"},[e._v(" "+e._s(t.item.response.tripleCount)+" ")]):n("span",{staticClass:"small"},[e._v("0")])]}},{key:"cell(actions)",fn:function(t){return[n("b-button",{staticClass:"mr-0 mb-2 d-block",attrs:{variant:"outline-primary"},on:{click:function(n){n.preventDefault(),!t.item.success&&"compressing"!==t.item.error&&e.$refs.upload.update(t.item,{active:!0})}}},[n("FontAwesomeIcon",{attrs:{icon:"upload"}}),n("span",{staticClass:"ml-2"},[e._v("upload now")])],1),n("b-button",{staticClass:"mr-0 mb-md-0 d-block d-md-inline-block",attrs:{variant:"outline-primary"},on:{click:function(n){return n.preventDefault(),e.remove(t.item)}}},[n("FontAwesomeIcon",{attrs:{icon:"minus-circle"}}),n("span",{staticClass:"ml-2"},[e._v("remove")])],1)]}}])})],1)],1)],1):n("b-card-body",[n("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("No service for adding data available. The Graph Store Protocol service should be configured to allow adding data.")])],1)],1)],1)],1)],1)},r=[],a=(n(1249),n(9826),n(1539),n(2222),n(4916),n(5306),n(6977),n(2651)),o=n(2948),s=n.n(o),l=n(8947),u=n(1436),c=n(7810),d=n(4148);function p(){var e="/home/afs/ASF/Release/jena/target/checkout/jena-fuseki2/jena-fuseki-ui/src/views/dataset/Upload.vue",t="f9c87642e2fbab2394c05f9781875f6b6ce15a71",n=new Function("return this")(),i="__coverage__",r={path:"/home/afs/ASF/Release/jena/target/checkout/jena-fuseki2/jena-fuseki-ui/src/views/dataset/Upload.vue",statementMap:{0:{start:{line:178,column:0},end:{line:178,column:59}},1:{start:{line:194,column:4},end:{line:254,column:5}},2:{start:{line:259,column:6},end:{line:261,column:7}},3:{start:{line:260,column:8},end:{line:260,column:17}},4:{start:{line:262,column:6},end:{line:267,column:10}},5:{start:{line:264,column:10},end:{line:266,column:12}},6:{start:{line:270,column:6},end:{line:272,column:7}},7:{start:{line:271,column:8},end:{line:271,column:17}},8:{start:{line:273,column:21},end:{line:273,column:132}},9:{start:{line:274,column:27},end:{line:274,column:107}},10:{start:{line:274,column:85},end:{line:274,column:100}},11:{start:{line:275,column:6},end:{line:275,column:94}},12:{start:{line:281,column:6},end:{line:285,column:7}},13:{start:{line:283,column:8},end:{line:283,column:27}},14:{start:{line:284,column:8},end:{line:284,column:23}},15:{start:{line:286,column:6},end:{line:288,column:7}},16:{start:{line:287,column:8},end:{line:287,column:24}},17:{start:{line:289,column:6},end:{line:291,column:7}},18:{start:{line:290,column:8},end:{line:290,column:24}},19:{start:{line:292,column:6},end:{line:292,column:15}},20:{start:{line:295,column:6},end:{line:295,column:36}},21:{start:{line:305,column:16},end:{line:305,column:20}},22:{start:{line:306,column:16},end:{line:306,column:21}},23:{start:{line:308,column:6},end:{line:314,column:7}},24:{start:{line:309,column:8},end:{line:309,column:65}},25:{start:{line:310,column:13},end:{line:314,column:7}},26:{start:{line:311,column:8},end:{line:311,column:65}},27:{start:{line:313,column:8},end:{line:313,column:30}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:193,column:2},end:{line:193,column:3}},loc:{start:{line:193,column:10},end:{line:255,column:3}},line:193},1:{name:"(anonymous_1)",decl:{start:{line:258,column:4},end:{line:258,column:5}},loc:{start:{line:258,column:25},end:{line:268,column:5}},line:258},2:{name:"(anonymous_2)",decl:{start:{line:263,column:13},end:{line:263,column:14}},loc:{start:{line:263,column:21},end:{line:267,column:9}},line:263},3:{name:"(anonymous_3)",decl:{start:{line:269,column:4},end:{line:269,column:5}},loc:{start:{line:269,column:21},end:{line:276,column:5}},line:269},4:{name:"(anonymous_4)",decl:{start:{line:274,column:73},end:{line:274,column:74}},loc:{start:{line:274,column:85},end:{line:274,column:100}},line:274},5:{name:"(anonymous_5)",decl:{start:{line:280,column:4},end:{line:280,column:5}},loc:{start:{line:280,column:25},end:{line:293,column:5}},line:280},6:{name:"(anonymous_6)",decl:{start:{line:294,column:4},end:{line:294,column:5}},loc:{start:{line:294,column:18},end:{line:296,column:5}},line:294},7:{name:"(anonymous_7)",decl:{start:{line:304,column:22},end:{line:304,column:23}},loc:{start:{line:304,column:38},end:{line:315,column:5}},line:304}},branchMap:{0:{loc:{start:{line:259,column:6},end:{line:261,column:7}},type:"if",locations:[{start:{line:259,column:6},end:{line:261,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:259},1:{loc:{start:{line:270,column:6},end:{line:272,column:7}},type:"if",locations:[{start:{line:270,column:6},end:{line:272,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:270},2:{loc:{start:{line:270,column:10},end:{line:270,column:74}},type:"binary-expr",locations:[{start:{line:270,column:10},end:{line:270,column:34}},{start:{line:270,column:38},end:{line:270,column:74}}],line:270},3:{loc:{start:{line:273,column:21},end:{line:273,column:132}},type:"cond-expr",locations:[{start:{line:273,column:89},end:{line:273,column:127}},{start:{line:273,column:130},end:{line:273,column:132}}],line:273},4:{loc:{start:{line:273,column:22},end:{line:273,column:85}},type:"binary-expr",locations:[{start:{line:273,column:22},end:{line:273,column:48}},{start:{line:273,column:52},end:{line:273,column:85}}],line:273},5:{loc:{start:{line:274,column:27},end:{line:274,column:107}},type:"binary-expr",locations:[{start:{line:274,column:27},end:{line:274,column:101}},{start:{line:274,column:105},end:{line:274,column:107}}],line:274},6:{loc:{start:{line:281,column:6},end:{line:285,column:7}},type:"if",locations:[{start:{line:281,column:6},end:{line:285,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:281},7:{loc:{start:{line:286,column:6},end:{line:288,column:7}},type:"if",locations:[{start:{line:286,column:6},end:{line:288,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:286},8:{loc:{start:{line:289,column:6},end:{line:291,column:7}},type:"if",locations:[{start:{line:289,column:6},end:{line:291,column:7}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:289},9:{loc:{start:{line:308,column:6},end:{line:314,column:7}},type:"if",locations:[{start:{line:308,column:6},end:{line:314,column:7}},{start:{line:310,column:13},end:{line:314,column:7}}],line:308},10:{loc:{start:{line:310,column:13},end:{line:314,column:7}},type:"if",locations:[{start:{line:310,column:13},end:{line:314,column:7}},{start:{line:312,column:13},end:{line:314,column:7}}],line:310}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0]},inputSourceMap:{version:3,sources:["Upload.vue"],names:[],mappings:";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0KA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",file:"Upload.vue",sourceRoot:"src/views/dataset",sourcesContent:['\x3c!--\n   Licensed to the Apache Software Foundation (ASF) under one or more\n   contributor license agreements.  See the NOTICE file distributed with\n   this work for additional information regarding copyright ownership.\n   The ASF licenses this file to You under the Apache License, Version 2.0\n   (the "License"); you may not use this file except in compliance with\n   the License.  You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an "AS IS" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n--\x3e\n\n<template>\n  <b-container fluid>\n    <b-row class="mt-4">\n      <b-col cols="12">\n        <h2>/{{ this.datasetName }}</h2>\n        <b-card no-body>\n          <b-card-header header-tag="nav">\n            <Menu :dataset-name="datasetName" />\n          </b-card-header>\n          <b-card-body v-if="!this.services[\'gsp-rw\'] || this.services[\'gsp-rw\'].length === 0">\n            <b-alert show variant="warning">No service for adding data available. The Graph Store Protocol service should be configured to allow adding data.</b-alert>\n          </b-card-body>\n          <b-card-body v-else>\n            <div v-show="$refs.upload && $refs.upload.dropActive" class="drop-active">\n              <h3>Drop files to upload</h3>\n            </div>\n            <b-row>\n              <b-col sm="12">\n                <h3>Upload files</h3>\n                <p>Load data into the default graph of the currently selected dataset, or the given named graph.\n                  You may upload any RDF format, such as Turtle, RDF/XML or TRiG.</p>\n                <b-form>\n                  <b-form-group\n                    id="dataset-graph-name-group"\n                    label="Dataset graph name"\n                    label-for="dataset-graph-name"\n                    label-cols="12"\n                    label-cols-sm="4"\n                    label-cols-md="4"\n                    label-cols-lg="2"\n                    label-size="sm"\n                  >\n                    <b-form-input\n                      pattern="[^\\s]+"\n                      oninvalid="this.setCustomValidity(\'Enter a valid dataset graph name\')"\n                      oninput="this.setCustomValidity(\'\')"\n                      id="dataset-graph-name"\n                      v-model="form.datasetGraphName"\n                      type="text"\n                      placeholder="Leave blank for default graph"\n                      trim\n                    ></b-form-input>\n                  </b-form-group>\n                  <b-form-group\n                    id="dataset-files"\n                    label="Files to upload"\n                    label-for="add-files-action-dropdown"\n                    label-cols="12"\n                    label-cols-sm="4"\n                    label-cols-md="4"\n                    label-cols-lg="2"\n                    label-size="sm"\n                  >\n                    <file-upload\n                      ref="upload"\n                      v-model="upload.files"\n                      :post-action="postActionUrl"\n                      :extensions="upload.extensions"\n                      :accept="upload.accept"\n                      :multiple="upload.multiple"\n                      :directory="upload.directory"\n                      :size="upload.size || 0"\n                      :thread="upload.thread < 1 ? 1 : (upload.thread > 5 ? 5 : upload.thread)"\n                      :headers="upload.headers"\n                      :data="upload.data"\n                      :drop="upload.drop"\n                      :drop-directory="upload.dropDirectory"\n                      :add-index="upload.addIndex"\n                      class="btn btn-success"\n                    >\n                      <FontAwesomeIcon icon="plus" />\n                      <span class="ml-2">select files</span>\n                    </file-upload>\n                    <b-button\n                      v-if="!$refs.upload || !$refs.upload.active"\n                      @click.prevent="$refs.upload.active = true"\n                      variant="primary"\n                      class="ml-2 d-inline">\n                      <FontAwesomeIcon icon="upload" />\n                      <span class="ml-2">upload all</span>\n                    </b-button>\n                    <b-button\n                      v-else\n                      @click.prevent="$refs.upload.active = false"\n                      variant="primary"\n                      class="ml-2 d-inline">\n                      <FontAwesomeIcon icon="times-circle" />\n                      <span class="ml-2">stop upload</span>\n                    </b-button>\n                  </b-form-group>\n                </b-form>\n              </b-col>\n            </b-row>\n            <b-row>\n              <b-col>\n                <b-table\n                  :fields="datasetTableFields"\n                  :items="datasetTableItems"\n                  stacked="lg"\n                  empty-text="No files selected"\n                  bordered\n                  fixed\n                  hover\n                  show-empty\n                >\n                  <template v-slot:cell(size)="data">\n                    {{ readableFileSize(data.item.size) }}\n                  </template>\n                  <template v-slot:cell(speed)="data">\n                    {{ readableFileSize(data.item.speed) }}/s\n                  </template>\n                  <template v-slot:cell(status)="data">\n                    <b-progress\n                      :variant="getFileStatus(data.item)"\n                      :value="data.item.progress"\n                      :max="100"\n                      :precision="2"\n                      show-progress></b-progress>\n                    <span class="small">Triples uploaded:&nbsp;</span>\n                    <span v-if="data.item.response.tripleCount" class="small">\n                      {{ data.item.response.tripleCount }}\n                    </span>\n                    <span v-else class="small">0</span>\n                  </template>\n                  <template v-slot:cell(actions)="data">\n                    <b-button\n                      @click.prevent="data.item.success || data.item.error === \'compressing\' ? false : $refs.upload.update(data.item, {active: true})"\n                      variant="outline-primary"\n                      class="mr-0 mb-2 d-block"\n                    >\n                      <FontAwesomeIcon icon="upload" />\n                      <span class="ml-2">upload now</span>\n                    </b-button>\n                    <b-button\n                      @click.prevent="remove(data.item)"\n                      variant="outline-primary"\n                      class="mr-0 mb-md-0 d-block d-md-inline-block"\n                    >\n                      <FontAwesomeIcon icon="minus-circle" />\n                      <span class="ml-2">remove</span>\n                    </b-button>\n                  </template>\n                </b-table>\n              </b-col>\n            </b-row>\n          </b-card-body>\n        </b-card>\n      </b-col>\n    </b-row>\n  </b-container>\n</template>\n\n<script>\nimport Menu from \'@/components/dataset/Menu\'\nimport FileUpload from \'vue-upload-component\'\nimport { library } from \'@fortawesome/fontawesome-svg-core\'\nimport { faPlus, faUpload, faTimesCircle, faMinusCircle } from \'@fortawesome/free-solid-svg-icons\'\nimport { FontAwesomeIcon } from \'@fortawesome/vue-fontawesome\'\nimport currentDatasetMixin from \'@/mixins/current-dataset\'\n\nlibrary.add(faPlus, faUpload, faTimesCircle, faMinusCircle)\n\nexport default {\n  name: \'DatasetUpload\',\n\n  components: {\n    Menu,\n    FontAwesomeIcon,\n    FileUpload\n  },\n\n  mixins: [\n    currentDatasetMixin\n  ],\n\n  data () {\n    return {\n      form: {\n        datasetGraphName: null,\n        datasetFiles: null\n      },\n      upload: {\n        files: [],\n        accept: \'\', // e.g. \'ttl,xml,rdf,...\'\n        minSize: 0,\n        // size: 1024 * 1024 * 10,\n        multiple: true,\n        directory: false,\n        drop: true,\n        dropDirectory: true,\n        addIndex: false,\n        thread: 3,\n        name: \'file\',\n        headers: { // e.g. CSRF headers\n        },\n        data: {},\n        autoCompress: 1024 * 1024,\n        uploadAuto: false,\n        isOption: false\n        // addData: {\n        //   show: false,\n        //   name: \'\',\n        //   type: \'\',\n        //   content: \'\'\n        // },\n        // editFile: {\n        //   show: false,\n        //   name: \'\'\n        // }\n      },\n      datasetTableFields: [\n        {\n          key: \'name\',\n          label: \'name\',\n          sortable: true,\n          sortDirection: \'asc\'\n        },\n        {\n          key: \'size\',\n          label: \'size\',\n          sortable: true,\n          sortDirection: \'asc\'\n        },\n        {\n          key: \'speed\',\n          label: \'speed\'\n        },\n        {\n          key: \'status\',\n          label: \'status\'\n        },\n        {\n          key: \'actions\',\n          label: \'actions\'\n        }\n      ]\n    }\n  },\n\n  computed: {\n    datasetTableItems () {\n      if (!this.upload.files) {\n        return []\n      }\n      return this.upload.files\n        .map(file => {\n          return Object.assign(file, {\n            status: this.getFileStatus(file)\n          })\n        })\n    },\n    postActionUrl () {\n      if (!this.services[\'gsp-rw\'] || this.services[\'gsp-rw\'].length === 0) {\n        return \'\'\n      }\n      const params = (this.form.datasetGraphName && this.form.datasetGraphName !== \'\') ? `?graph=${this.form.datasetGraphName}` : \'\'\n      const dataEndpoint = this.services[\'gsp-rw\'][\'srv.endpoints\'].find(endpoint => endpoint !== \'\') || \'\'\n      return this.$fusekiService.getFusekiUrl(`/${this.datasetName}/${dataEndpoint}${params}`)\n    }\n  },\n\n  methods: {\n    getFileStatus (file) {\n      if (file.error) {\n        // eslint-disable-next-line no-console\n        console.error(file)\n        return \'danger\'\n      }\n      if (file.success) {\n        return \'success\'\n      }\n      if (file.active) {\n        return \'warning\'\n      }\n      return \'\'\n    },\n    remove (file) {\n      this.$refs.upload.remove(file)\n    },\n    /**\n     * Return file size in bytes in a human-readable form.\n     *\n     * Copied from the Backbone.js code with modifications.\n     *\n     * Replaced sprintf usage by .toFixed(2).\n     */\n    readableFileSize: function (size) {\n      const k = 1024\n      const m = k * k\n\n      if (size >= m) {\n        return `${(size / m).toFixed(2).replace(/\\.?0*$/, \'\')}mb`\n      } else if (size >= k) {\n        return `${(size / k).toFixed(2).replace(/\\.?0*$/, \'\')}kb`\n      } else {\n        return `${size} bytes`\n      }\n    }\n  }\n}\n<\/script>\n']},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f9c87642e2fbab2394c05f9781875f6b6ce15a71"},a=n[i]||(n[i]={});a[e]&&a[e].hash===t||(a[e]=r);var o=a[e];return p=function(){return o},o}p(),p().s[0]++,l.vI.add(u.r8p,u.cf$,u.nYk,u.uMC);var f={name:"DatasetUpload",components:{Menu:a.Z,FontAwesomeIcon:c.GN,FileUpload:s()},mixins:[d.Z],data:function(){return p().f[0]++,p().s[1]++,{form:{datasetGraphName:null,datasetFiles:null},upload:{files:[],accept:"",minSize:0,multiple:!0,directory:!1,drop:!0,dropDirectory:!0,addIndex:!1,thread:3,name:"file",headers:{},data:{},autoCompress:1048576,uploadAuto:!1,isOption:!1},datasetTableFields:[{key:"name",label:"name",sortable:!0,sortDirection:"asc"},{key:"size",label:"size",sortable:!0,sortDirection:"asc"},{key:"speed",label:"speed"},{key:"status",label:"status"},{key:"actions",label:"actions"}]}},computed:{datasetTableItems:function(){var e=this;return p().f[1]++,p().s[2]++,this.upload.files?(p().b[0][1]++,p().s[4]++,this.upload.files.map((function(t){return p().f[2]++,p().s[5]++,Object.assign(t,{status:e.getFileStatus(t)})}))):(p().b[0][0]++,p().s[3]++,[])},postActionUrl:function(){if(p().f[3]++,p().s[6]++,p().b[2][0]++,!this.services["gsp-rw"]||(p().b[2][1]++,0===this.services["gsp-rw"].length))return p().b[1][0]++,p().s[7]++,"";p().b[1][1]++;var e=(p().s[8]++,p().b[4][0]++,this.form.datasetGraphName&&(p().b[4][1]++,""!==this.form.datasetGraphName)?(p().b[3][0]++,"?graph=".concat(this.form.datasetGraphName)):(p().b[3][1]++,"")),t=(p().s[9]++,p().b[5][0]++,this.services["gsp-rw"]["srv.endpoints"].find((function(e){return p().f[4]++,p().s[10]++,""!==e}))||(p().b[5][1]++,""));return p().s[11]++,this.$fusekiService.getFusekiUrl("/".concat(this.datasetName,"/").concat(t).concat(e))}},methods:{getFileStatus:function(e){return p().f[5]++,p().s[12]++,e.error?(p().b[6][0]++,p().s[13]++,console.error(e),p().s[14]++,"danger"):(p().b[6][1]++,p().s[15]++,e.success?(p().b[7][0]++,p().s[16]++,"success"):(p().b[7][1]++,p().s[17]++,e.active?(p().b[8][0]++,p().s[18]++,"warning"):(p().b[8][1]++,p().s[19]++,"")))},remove:function(e){p().f[6]++,p().s[20]++,this.$refs.upload.remove(e)},readableFileSize:function(e){p().f[7]++;var t=(p().s[21]++,1024),n=(p().s[22]++,t*t);return p().s[23]++,e>=n?(p().b[9][0]++,p().s[24]++,"".concat((e/n).toFixed(2).replace(/\.?0*$/,""),"mb")):(p().b[9][1]++,p().s[25]++,e>=t?(p().b[10][0]++,p().s[26]++,"".concat((e/t).toFixed(2).replace(/\.?0*$/,""),"kb")):(p().b[10][1]++,p().s[27]++,"".concat(e," bytes")))}}},m=f,h=n(1001),v=(0,h.Z)(m,i,r,!1,null,null,null),A=v.exports},1530:function(e,t,n){"use strict";var i=n(8710).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},7007:function(e,t,n){"use strict";n(4916);var i=n(1702),r=n(1320),a=n(2261),o=n(7293),s=n(5112),l=n(8880),u=s("species"),c=RegExp.prototype;e.exports=function(e,t,n,d){var p=s(e),f=!o((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),m=f&&!o((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!f||!m||n){var h=i(/./[p]),v=t(p,""[e],(function(e,t,n,r,o){var s=i(e),l=t.exec;return l===a||l===c.exec?f&&!o?{done:!0,value:h(t,n,r)}:{done:!0,value:s(n,t,r)}:{done:!1}}));r(String.prototype,e,v[0]),r(c,p,v[1])}d&&l(c[p],"sham",!0)}},647:function(e,t,n){var i=n(1702),r=n(7908),a=Math.floor,o=i("".charAt),s=i("".replace),l=i("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,i,d,p){var f=n+e.length,m=i.length,h=c;return void 0!==d&&(d=r(d),h=u),s(p,h,(function(r,s){var u;switch(o(s,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,n);case"'":return l(t,f);case"<":u=d[l(s,1,-1)];break;default:var c=+s;if(0===c)return r;if(c>m){var p=a(c/10);return 0===p?r:p<=m?void 0===i[p-1]?o(s,1):i[p-1]+o(s,1):r}u=i[c-1]}return void 0===u?"":u}))}},7651:function(e,t,n){var i=n(7854),r=n(6916),a=n(9670),o=n(614),s=n(4326),l=n(2261),u=i.TypeError;e.exports=function(e,t){var n=e.exec;if(o(n)){var i=r(n,e,t);return null!==i&&a(i),i}if("RegExp"===s(e))return r(l,e,t);throw u("RegExp#exec called on incompatible receiver")}},2261:function(e,t,n){"use strict";var i=n(6916),r=n(1702),a=n(1340),o=n(7066),s=n(2999),l=n(2309),u=n(30),c=n(9909).get,d=n(9441),p=n(7168),f=l("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,h=m,v=r("".charAt),A=r("".indexOf),b=r("".replace),g=r("".slice),y=function(){var e=/a/,t=/b*/g;return i(m,e,"a"),i(m,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),C=s.BROKEN_CARET,k=void 0!==/()??/.exec("")[1],x=y||k||C||d||p;x&&(h=function(e){var t,n,r,s,l,d,p,x=this,w=c(x),S=a(e),I=w.raw;if(I)return I.lastIndex=x.lastIndex,t=i(h,I,S),x.lastIndex=I.lastIndex,t;var $=w.groups,F=C&&x.sticky,E=i(o,x),_=x.source,O=0,T=S;if(F&&(E=b(E,"y",""),-1===A(E,"g")&&(E+="g"),T=g(S,x.lastIndex),x.lastIndex>0&&(!x.multiline||x.multiline&&"\n"!==v(S,x.lastIndex-1))&&(_="(?: "+_+")",T=" "+T,O++),n=new RegExp("^(?:"+_+")",E)),k&&(n=new RegExp("^"+_+"$(?!\\s)",E)),y&&(r=x.lastIndex),s=i(m,F?n:x,T),F?s?(s.input=g(s.input,O),s[0]=g(s[0],O),s.index=x.lastIndex,x.lastIndex+=s[0].length):x.lastIndex=0:y&&s&&(x.lastIndex=x.global?s.index+s[0].length:r),k&&s&&s.length>1&&i(f,s[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(s[l]=void 0)})),s&&$)for(s.groups=d=u(null),l=0;l<$.length;l++)p=$[l],d[p[0]]=s[p[1]];return s}),e.exports=h},7066:function(e,t,n){"use strict";var i=n(9670);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2999:function(e,t,n){var i=n(7293),r=n(7854),a=r.RegExp,o=i((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=o||i((function(){return!a("a","y").sticky})),l=o||i((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:l,MISSED_STICKY:s,UNSUPPORTED_Y:o}},9441:function(e,t,n){var i=n(7293),r=n(7854),a=r.RegExp;e.exports=i((function(){var e=a(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},7168:function(e,t,n){var i=n(7293),r=n(7854),a=r.RegExp;e.exports=i((function(){var e=a("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},8415:function(e,t,n){"use strict";var i=n(7854),r=n(9303),a=n(1340),o=n(4488),s=i.RangeError;e.exports=function(e){var t=a(o(this)),n="",i=r(e);if(i<0||i==1/0)throw s("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},863:function(e,t,n){var i=n(1702);e.exports=i(1..valueOf)},6977:function(e,t,n){"use strict";var i=n(2109),r=n(7854),a=n(1702),o=n(9303),s=n(863),l=n(8415),u=n(7293),c=r.RangeError,d=r.String,p=Math.floor,f=a(l),m=a("".slice),h=a(1..toFixed),v=function(e,t,n){return 0===t?n:t%2===1?v(e,t-1,n*e):v(e*e,t/2,n)},A=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},b=function(e,t,n){var i=-1,r=n;while(++i<6)r+=t*e[i],e[i]=r%1e7,r=p(r/1e7)},g=function(e,t){var n=6,i=0;while(--n>=0)i+=e[n],e[n]=p(i/t),i=i%t*1e7},y=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var i=d(e[t]);n=""===n?i:n+f("0",7-i.length)+i}return n},C=u((function(){return"0.000"!==h(8e-5,3)||"1"!==h(.9,0)||"1.25"!==h(1.255,2)||"1000000000000000128"!==h(0xde0b6b3a7640080,0)}))||!u((function(){h({})}));i({target:"Number",proto:!0,forced:C},{toFixed:function(e){var t,n,i,r,a=s(this),l=o(e),u=[0,0,0,0,0,0],p="",h="0";if(l<0||l>20)throw c("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return d(a);if(a<0&&(p="-",a=-a),a>1e-21)if(t=A(a*v(2,69,1))-69,n=t<0?a*v(2,-t,1):a/v(2,t,1),n*=4503599627370496,t=52-t,t>0){b(u,0,n),i=l;while(i>=7)b(u,1e7,0),i-=7;b(u,v(10,i,1),0),i=t-1;while(i>=23)g(u,1<<23),i-=23;g(u,1<<i),b(u,1,1),g(u,2),h=y(u)}else b(u,0,n),b(u,1<<-t,0),h=y(u)+f("0",l);return l>0?(r=h.length,h=p+(r<=l?"0."+f("0",l-r)+h:m(h,0,r-l)+"."+m(h,r-l))):h=p+h,h}})},4916:function(e,t,n){"use strict";var i=n(2109),r=n(2261);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},5306:function(e,t,n){"use strict";var i=n(2104),r=n(6916),a=n(1702),o=n(7007),s=n(7293),l=n(9670),u=n(614),c=n(9303),d=n(7466),p=n(1340),f=n(4488),m=n(1530),h=n(8173),v=n(647),A=n(7651),b=n(5112),g=b("replace"),y=Math.max,C=Math.min,k=a([].concat),x=a([].push),w=a("".indexOf),S=a("".slice),I=function(e){return void 0===e?e:String(e)},$=function(){return"$0"==="a".replace(/./,"$0")}(),F=function(){return!!/./[g]&&""===/./[g]("a","$0")}(),E=!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));o("replace",(function(e,t,n){var a=F?"$":"$0";return[function(e,n){var i=f(this),a=void 0==e?void 0:h(e,g);return a?r(a,e,i,n):r(t,p(i),e,n)},function(e,r){var o=l(this),s=p(e);if("string"==typeof r&&-1===w(r,a)&&-1===w(r,"$<")){var f=n(t,o,s,r);if(f.done)return f.value}var h=u(r);h||(r=p(r));var b=o.global;if(b){var g=o.unicode;o.lastIndex=0}var $=[];while(1){var F=A(o,s);if(null===F)break;if(x($,F),!b)break;var E=p(F[0]);""===E&&(o.lastIndex=m(s,d(o.lastIndex),g))}for(var _="",O=0,T=0;T<$.length;T++){F=$[T];for(var j=p(F[0]),D=y(C(c(F.index),s.length),0),N=[],z=1;z<F.length;z++)x(N,I(F[z]));var R=F.groups;if(h){var U=k([j],N,D,s);void 0!==R&&x(U,R);var P=p(i(r,void 0,U))}else P=v(j,s,D,N,R,r);D>=O&&(_+=S(s,O,D)+P,O=D+j.length)}return _+S(s,O)}]}),!E||!$||F)},2948:function(e){
/*!
 * Name: vue-upload-component
 * Version: 2.8.21
 * Author: Marco Lang
 */
(function(t,n){e.exports=n()})(0,(function(){"use strict";var e=function(e){var t=new XMLHttpRequest;return t.open(e.method||"GET",e.url),t.responseType="json",e.headers&&Object.keys(e.headers).forEach((function(n){t.setRequestHeader(n,e.headers[n])})),t},t=function(e,t){return new Promise((function(n,i){e.onload=function(){if(e.status>=200&&e.status<300){var t;try{t=JSON.parse(e.response)}catch(r){t=e.response}n(t)}else i(e.response)},e.onerror=function(){return i(e.response)},e.send(JSON.stringify(t))}))},n=function(e,t){var n=new FormData;for(var i in t)n.append(i,t[i]);return new Promise((function(t,i){e.onload=function(){if(e.status>=200&&e.status<300){var n;try{n=JSON.parse(e.response)}catch(r){n=e.response}t(n)}else i(e.response)},e.onerror=function(){return i(e.response)},e.send(n)}))};function i(n){var i=e(n);return t(i,n.body)}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,n){a(this,t),this.file=e,this.options=n,this.chunks=[],this.sessionId=null,this.chunkSize=null,this.speedInterval=null}return r(t,[{key:"createChunks",value:function(){this.chunks=[];var e=0,t=this.chunkSize;while(e<this.fileSize)this.chunks.push({blob:this.file.file.slice(e,t),startOffset:e,active:!1,retries:this.maxRetries}),e=t,t=e+this.chunkSize}},{key:"updateFileProgress",value:function(){this.file.progress=this.progress}},{key:"pause",value:function(){this.file.active=!1,this.stopChunks()}},{key:"stopChunks",value:function(){this.chunksUploading.forEach((function(e){e.xhr.abort(),e.active=!1})),this.stopSpeedCalc()}},{key:"resume",value:function(){this.file.active=!0,this.startChunking()}},{key:"upload",value:function(){var e=this;return this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),this.start(),this.promise}},{key:"start",value:function(){var e=this;i({method:"POST",headers:Object.assign({},this.headers,{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.startBody,{phase:"start",mime_type:this.fileType,size:this.fileSize,name:this.fileName})}).then((function(t){if("success"!==t.status)return e.file.response=t,e.reject("server");e.sessionId=t.data.session_id,e.chunkSize=t.data.end_offset,e.createChunks(),e.startChunking()})).catch((function(t){e.file.response=t,e.reject("server")}))}},{key:"startChunking",value:function(){for(var e=0;e<this.maxActiveChunks;e++)this.uploadNextChunk();this.startSpeedCalc()}},{key:"uploadNextChunk",value:function(){if(this.file.active){if(this.hasChunksToUpload)return this.uploadChunk(this.chunksToUpload[0]);if(0===this.chunksUploading.length)return this.finish()}}},{key:"uploadChunk",value:function(t){var i=this;t.progress=0,t.active=!0,this.updateFileProgress(),t.xhr=e({method:"POST",headers:this.headers,url:this.action}),t.xhr.upload.addEventListener("progress",(function(e){e.lengthComputable&&(t.progress=Math.round(e.loaded/e.total*100))}),!1),n(t.xhr,Object.assign(this.uploadBody,{phase:"upload",session_id:this.sessionId,start_offset:t.startOffset,chunk:t.blob})).then((function(e){if(t.active=!1,"success"===e.status)t.uploaded=!0;else if(t.retries--<=0)return i.stopChunks(),i.reject("upload");i.uploadNextChunk()})).catch((function(){if(t.active=!1,t.retries--<=0)return i.stopChunks(),i.reject("upload");i.uploadNextChunk()}))}},{key:"finish",value:function(){var e=this;this.updateFileProgress(),this.stopSpeedCalc(),i({method:"POST",headers:Object.assign({},this.headers,{"Content-Type":"application/json"}),url:this.action,body:Object.assign(this.finishBody,{phase:"finish",session_id:this.sessionId})}).then((function(t){if(e.file.response=t,"success"!==t.status)return e.reject("server");e.resolve(t)})).catch((function(t){e.file.response=t,e.reject("server")}))}},{key:"startSpeedCalc",value:function(){var e=this;this.file.speed=0;var t=0;this.speedInterval||(this.speedInterval=window.setInterval((function(){var n=e.progress/100*e.fileSize;e.file.speed=n-t,t=n}),1e3))}},{key:"stopSpeedCalc",value:function(){this.speedInterval&&window.clearInterval(this.speedInterval),this.speedInterval=null,this.file.speed=0}},{key:"maxRetries",get:function(){return parseInt(this.options.maxRetries,10)}},{key:"maxActiveChunks",get:function(){return parseInt(this.options.maxActive,10)}},{key:"fileType",get:function(){return this.file.type}},{key:"fileSize",get:function(){return this.file.size}},{key:"fileName",get:function(){return this.file.name}},{key:"action",get:function(){return this.options.action||null}},{key:"startBody",get:function(){return this.options.startBody||{}}},{key:"uploadBody",get:function(){return this.options.uploadBody||{}}},{key:"finishBody",get:function(){return this.options.finishBody||{}}},{key:"headers",get:function(){return this.options.headers||{}}},{key:"readyToUpload",get:function(){return!!this.chunks}},{key:"progress",get:function(){var e=this,t=this.chunksUploaded.length/this.chunks.length*100,n=this.chunksUploading.reduce((function(t,n){return t+(0|n.progress)/e.chunks.length}),0);return Math.min(t+n,100)}},{key:"chunksToUpload",get:function(){return this.chunks.filter((function(e){return!e.active&&!e.uploaded}))}},{key:"hasChunksToUpload",get:function(){return this.chunksToUpload.length>0}},{key:"chunksUploading",get:function(){return this.chunks.filter((function(e){return!!e.xhr&&!!e.active}))}},{key:"chunksUploaded",get:function(){return this.chunks.filter((function(e){return!!e.uploaded}))}}]),t}(),s={methods:{change:function(e){this.$parent.addInputFile(e.target),e.target.files?(e.target.value="",e.target.files.length&&!/safari/i.test(navigator.userAgent)&&(e.target.type="",e.target.type="file")):(this.$destroy(),new this.constructor({parent:this.$parent,el:this.$el}))}}};function l(e,t,n,i,r,a,o,s,l,u){"boolean"!==typeof o&&(l=s,s=o,o=!1);var c,d="function"===typeof n?n.options:n;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,r&&(d.functional=!0)),i&&(d._scopeId=i),a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},d._ssrRegister=c):t&&(c=o?function(){t.call(this,u(this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),c)if(d.functional){var p=d.render;d.render=function(e,t){return c.call(t),p(e,t)}}else{var f=d.beforeCreate;d.beforeCreate=f?[].concat(f,c):[c]}return n}var u=l,c=s,d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("input",{attrs:{type:"file",name:e.$parent.name,id:e.$parent.inputId||e.$parent.name,accept:e.$parent.accept,capture:e.$parent.capture,disabled:e.$parent.disabled,webkitdirectory:e.$parent.directory&&e.$parent.features.directory,directory:e.$parent.directory&&e.$parent.features.directory,multiple:e.$parent.multiple&&e.$parent.features.html5},on:{change:e.change}})},p=[],f=void 0,m=void 0,h=void 0,v=!1,A=u({render:d,staticRenderFns:p},f,c,m,v,h,void 0,void 0),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function y(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var C={headers:{},action:"",minSize:1048576,maxActive:3,maxRetries:5,handler:o},k={components:{InputFile:A},props:{inputId:{type:String},name:{type:String,default:"file"},accept:{type:String},capture:{},disabled:{},multiple:{type:Boolean},maximum:{type:Number,default:function(){return this.multiple?0:1}},addIndex:{type:[Boolean,Number]},directory:{type:Boolean},postAction:{type:String},putAction:{type:String},customAction:{type:Function},headers:{type:Object,default:Object},data:{type:Object,default:Object},timeout:{type:Number,default:0},drop:{default:!1},dropDirectory:{type:Boolean,default:!0},size:{type:Number,default:0},extensions:{default:Array},value:{type:Array,default:Array},thread:{type:Number,default:1},chunkEnabled:{type:Boolean,default:!1},chunk:{type:Object,default:function(){return C}}},data:function(){return{files:this.value,features:{html5:!0,directory:!1,drop:!1},active:!1,dropActive:!1,uploading:0,destroy:!1}},mounted:function(){var e=document.createElement("input");if(e.type="file",e.multiple=!0,window.FormData&&e.files?("boolean"!==typeof e.webkitdirectory&&"boolean"!==typeof e.directory||(this.features.directory=!0),this.features.html5&&"undefined"!==typeof e.ondrop&&(this.features.drop=!0)):this.features.html5=!1,this.maps={},this.files)for(var t=0;t<this.files.length;t++){var n=this.files[t];this.maps[n.id]=n}this.$nextTick((function(){var e=this;this.$parent?(this.$parent.$forceUpdate(),this.$parent.$nextTick((function(){e.watchDrop(e.drop)}))):this.watchDrop(this.drop)}))},beforeDestroy:function(){this.destroy=!0,this.active=!1,this.watchDrop(!1)},computed:{uploaded:function(){for(var e=void 0,t=0;t<this.files.length;t++)if(e=this.files[t],e.fileObject&&!e.error&&!e.success)return!1;return!0},chunkOptions:function(){return Object.assign(C,this.chunk)},className:function(){return["file-uploads",this.features.html5?"file-uploads-html5":"file-uploads-html4",this.features.directory&&this.directory?"file-uploads-directory":void 0,this.features.drop&&this.drop?"file-uploads-drop":void 0,this.disabled?"file-uploads-disabled":void 0]}},watch:{active:function(e){this.watchActive(e)},dropActive:function(){this.$parent&&this.$parent.$forceUpdate()},drop:function(e){this.watchDrop(e)},value:function(e){if(this.files!==e){this.files=e;var t=this.maps;this.maps={};for(var n=0;n<this.files.length;n++){var i=this.files[n];this.maps[i.id]=i}for(var r in this.maps){var a=this.maps[r],o=t[r];a!==o&&this.emitFile(a,o)}for(var s in t)this.maps[s]||this.emitFile(void 0,t[s])}}},methods:{clear:function(){if(this.files.length){var e=this.files;this.files=[],this.maps={},this.emitInput();for(var t=0;t<e.length;t++)this.emitFile(void 0,e[t])}return!0},get:function(e){return!!e&&("object"===("undefined"===typeof e?"undefined":g(e))?this.maps[e.id]||!1:this.maps[e]||!1)},add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.addIndex,n=e,i=n instanceof Array;i||(n=[n]);for(var r=[],a=0;a<n.length;a++){var o=n[a];this.features.html5&&o instanceof Blob&&(o={file:o,size:o.size,name:o.webkitRelativePath||o.relativePath||o.name||"unknown",type:o.type});var s=!1;if(!1===o.fileObject||(o.fileObject||"undefined"!==typeof Element&&o.el instanceof Element||"undefined"!==typeof Blob&&o.file instanceof Blob)&&(s=!0),s&&(o=b({fileObject:!0,size:-1,name:"Filename",type:"",active:!1,error:"",success:!1,putAction:this.putAction,postAction:this.postAction,timeout:this.timeout},o,{response:{},progress:"0.00",speed:0}),o.data=b({},this.data,o.data?o.data:{}),o.headers=b({},this.headers,o.headers?o.headers:{})),o.id||(o.id=Math.random().toString(36).substr(2)),!this.emitFilter(o,void 0)){if(this.maximum>1&&r.length+this.files.length>=this.maximum)break;if(r.push(o),1===this.maximum)break}}if(!r.length)return!1;1===this.maximum&&this.clear();var l=void 0;if(!0===t||0===t)l=r.concat(this.files);else if(t){var u;l=this.files.concat([]),(u=l).splice.apply(u,[t,0].concat(r))}else l=this.files.concat(r);this.files=l;for(var c=0;c<r.length;c++){var d=r[c];this.maps[d.id]=d}this.emitInput();for(var p=0;p<r.length;p++)this.emitFile(r[p],void 0);return i?r:r[0]},addInputFile:function(e){var t=[];if(e.files)for(var n=0;n<e.files.length;n++){var i=e.files[n];t.push({size:i.size,name:i.webkitRelativePath||i.relativePath||i.name,type:i.type,file:i})}else{var r=e.value.replace(/\\/g,"/").split("/");delete e.__vuex__,t.push({name:r[r.length-1],el:e})}return this.add(t)},addDataTransfer:function(e){var t=this,n=[];if(e.items&&e.items.length){for(var i=[],r=0;r<e.items.length;r++){var a=e.items[r];a=a.getAsEntry?a.getAsEntry()||a.getAsFile():a.webkitGetAsEntry&&a.webkitGetAsEntry()||a.getAsFile(),a&&i.push(a)}return new Promise((function(e,r){var a=function r(a){var o=i[a];if(!o||t.maximum>0&&n.length>=t.maximum)return e(t.add(n));t.getEntry(o).then((function(e){n.push.apply(n,y(e)),r(a+1)}))};a(0)}))}if(e.files.length){for(var o=0;o<e.files.length;o++)if(n.push(e.files[o]),this.maximum>0&&n.length>=this.maximum)break;return Promise.resolve(this.add(n))}return Promise.resolve([])},getEntry:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new Promise((function(i,r){if(e.isFile)e.file((function(e){i([{size:e.size,name:n+e.name,type:e.type,file:e}])}));else if(e.isDirectory&&t.dropDirectory){var a=[],o=e.createReader(),s=function r(){o.readEntries((function(o){var s=function s(l){return!o[l]&&0===l||t.maximum>0&&a.length>=t.maximum?i(a):o[l]?void t.getEntry(o[l],n+e.name+"/").then((function(e){a.push.apply(a,y(e)),s(l+1)})):r()};s(0)}))};s()}else i([])}))},replace:function(e,t){var n=this.get(e),i=this.get(t);if(!n||!i||n===i)return!1;var r=this.files.concat([]),a=r.indexOf(n),o=r.indexOf(i);return-1!==a&&-1!==o&&(r[a]=i,r[o]=n,this.files=r,this.emitInput(),!0)},remove:function(e){var t=this.get(e);if(t){if(this.emitFilter(void 0,t))return!1;var n=this.files.concat([]),i=n.indexOf(t);if(-1===i)return console.error("remove",t),!1;n.splice(i,1),this.files=n,delete this.maps[t.id],this.emitInput(),this.emitFile(void 0,t)}return t},update:function(e,t){var n=this.get(e);if(n){var i=b({},n,t);if(!n.fileObject||!n.active||i.active||i.error||i.success||(i.error="abort"),this.emitFilter(i,n))return!1;var r=this.files.concat([]),a=r.indexOf(n);return-1===a?(console.error("update",n),!1):(r.splice(a,1,i),this.files=r,delete this.maps[n.id],this.maps[i.id]=i,this.emitInput(),this.emitFile(i,n),i)}return!1},emitFilter:function(e,t){var n=!1;return this.$emit("input-filter",e,t,(function(){return n=!0,n})),n},emitFile:function(e,t){this.$emit("input-file",e,t),!(e&&e.fileObject&&e.active)||t&&t.active?e&&e.fileObject&&e.active||!t||!t.fileObject||!t.active||this.uploading--:(this.uploading++,this.$nextTick((function(){var t=this;setTimeout((function(){t.upload(e).then((function(){e=t.get(e),e&&e.fileObject&&t.update(e,{active:!1,success:!e.error})})).catch((function(n){t.update(e,{active:!1,success:!1,error:n.code||n.error||n.message||n})}))}),parseInt(50*Math.random()+50,10))}))),!this.active||Boolean(e)===Boolean(t)&&e.active===t.active||this.watchActive(!0)},emitInput:function(){this.$emit("input",this.files)},upload:function(e){var t=this.get(e);if(!t)return Promise.reject("not_exists");if(!t.fileObject)return Promise.reject("file_object");if(t.error)return Promise.reject(t.error);if(t.success)return Promise.resolve(t);var n=this.extensions;if(n&&(n.length||"undefined"===typeof n.length)&&("object"===("undefined"===typeof n?"undefined":g(n))&&n instanceof RegExp||("string"===typeof n&&(n=n.split(",").map((function(e){return e.trim()})).filter((function(e){return e}))),n=new RegExp("\\.("+n.join("|").replace(/\./g,"\\.")+")$","i")),-1===t.name.search(n)))return Promise.reject("extension");if(this.size>0&&t.size>=0&&t.size>this.size)return Promise.reject("size");if(this.customAction)return this.customAction(t,this);if(this.features.html5){if(this.shouldUseChunkUpload(t))return this.uploadChunk(t);if(t.putAction)return this.uploadPut(t);if(t.postAction)return this.uploadHtml5(t)}return t.postAction?this.uploadHtml4(t):Promise.reject("No action configured")},shouldUseChunkUpload:function(e){return this.chunkEnabled&&!!this.chunkOptions.handler&&e.size>this.chunkOptions.minSize},uploadChunk:function(e){var t=this.chunkOptions.handler;return e.chunk=new t(e,this.chunkOptions),e.chunk.upload()},uploadPut:function(e){var t=[],n=void 0;for(var i in e.data)n=e.data[i],null!==n&&void 0!==n&&t.push(encodeURIComponent(i)+"="+encodeURIComponent(n));var r=t.length?(-1===e.putAction.indexOf("?")?"?":"&")+t.join("&"):"",a=new XMLHttpRequest;return a.open("PUT",e.putAction+r),this.uploadXhr(a,e,e.file)},uploadHtml5:function(e){var t=new window.FormData,n=void 0;for(var i in e.data)n=e.data[i],n&&"object"===("undefined"===typeof n?"undefined":g(n))&&"function"!==typeof n.toString?n instanceof File?t.append(i,n,n.name):t.append(i,JSON.stringify(n)):null!==n&&void 0!==n&&t.append(i,n);t.append(this.name,e.file,e.file.filename||e.name);var r=new XMLHttpRequest;return r.open("POST",e.postAction),this.uploadXhr(r,e,t)},uploadXhr:function(e,t,n){var i=this,r=t,a=0,o=0;e.upload.onprogress=function(e){if(r=i.get(r),e.lengthComputable&&r&&r.fileObject&&r.active){var t=Math.round(Date.now()/1e3);t!==a&&(a=t,r=i.update(r,{progress:(e.loaded/e.total*100).toFixed(2),speed:e.loaded-o}),o=e.loaded)}};var s=setInterval((function(){if(r=i.get(r),!r||!r.fileObject||r.success||r.error||!r.active){s&&(clearInterval(s),s=!1);try{e.abort(),e.timeout=1}catch(t){}}}),100);return new Promise((function(t,a){var o=void 0,l=function(n){if(!o){if(o=!0,s&&(clearInterval(s),s=!1),r=i.get(r),!r)return a("not_exists");if(!r.fileObject)return a("file_object");if(r.error)return a(r.error);if(!r.active)return a("abort");if(r.success)return t(r);var l={};switch(n.type){case"timeout":case"abort":l.error=n.type;break;case"error":e.status?e.status>=500?l.error="server":e.status>=400&&(l.error="denied"):l.error="network";break;default:e.status>=500?l.error="server":e.status>=400?l.error="denied":l.progress="100.00"}if(e.responseText){var u=e.getResponseHeader("Content-Type");u&&-1!==u.indexOf("/json")?l.response=JSON.parse(e.responseText):l.response=e.responseText}return r=i.update(r,l),r.error?a(r.error):t(r)}};for(var u in e.onload=l,e.onerror=l,e.onabort=l,e.ontimeout=l,r.timeout&&(e.timeout=r.timeout),r.headers)e.setRequestHeader(u,r.headers[u]);r=i.update(r,{xhr:e}),e.send(n)}))},uploadHtml4:function(e){var t=this,n=e,i=function(e){27===e.keyCode&&e.preventDefault()},r=document.createElement("iframe");r.id="upload-iframe-"+n.id,r.name="upload-iframe-"+n.id,r.src="about:blank",r.setAttribute("style","width:1px;height:1px;top:-999em;position:absolute; margin-top:-999em;");var a=document.createElement("form");a.action=n.postAction,a.name="upload-form-"+n.id,a.setAttribute("method","POST"),a.setAttribute("target","upload-iframe-"+n.id),a.setAttribute("enctype","multipart/form-data");var o=void 0,s=void 0;for(var l in n.data)o=n.data[l],o&&"object"===("undefined"===typeof o?"undefined":g(o))&&"function"!==typeof o.toString&&(o=JSON.stringify(o)),null!==o&&void 0!==o&&(s=document.createElement("input"),s.type="hidden",s.name=l,s.value=o,a.appendChild(s));a.appendChild(n.el),document.body.appendChild(r).appendChild(a);var u=function(){var e=void 0;try{r.contentWindow&&(e=r.contentWindow.document)}catch(t){}if(!e)try{e=r.contentDocument?r.contentDocument:r.document}catch(t){e=r.document}return e&&e.body?e.body.innerHTML:null};return new Promise((function(e,o){setTimeout((function(){if(n=t.update(n,{iframe:r}),!n)return o("not_exists");var s=setInterval((function(){n=t.get(n),n&&n.fileObject&&!n.success&&!n.error&&n.active||(s&&(clearInterval(s),s=!1),r.onabort({type:n?"abort":"not_exists"}))}),100),l=void 0,c=function(r){if(!l){if(l=!0,s&&(clearInterval(s),s=!1),document.body.removeEventListener("keydown",i),n=t.get(n),!n)return o("not_exists");if(!n.fileObject)return o("file_object");if(n.error)return o(n.error);if(!n.active)return o("abort");if(n.success)return e(n);var a=u(),c={};switch(r.type){case"abort":c.error="abort";break;case"error":n.error?c.error=n.error:c.error=null===a?"network":"denied";break;default:n.error?c.error=n.error:null===c?c.error="network":c.progress="100.00"}if(null!==a){if(a&&"{"===a.substr(0,1)&&"}"===a.substr(a.length-1,1))try{a=JSON.parse(a)}catch(d){}c.response=a}return n=t.update(n,c),n.error?o(n.error):e(n)}};r.onload=c,r.onerror=c,r.onabort=c,document.body.addEventListener("keydown",i),a.submit()}),50)})).then((function(e){return r.parentNode&&r.parentNode.removeChild(r),e})).catch((function(e){return r.parentNode&&r.parentNode.removeChild(r),e}))},watchActive:function(e){var t=void 0,n=0;while(t=this.files[n])if(n++,t.fileObject)if(e&&!this.destroy){if(this.uploading>=this.thread||this.uploading&&!this.features.html5)break;t.active||t.error||t.success||this.update(t,{active:!0})}else t.active&&this.update(t,{active:!1});else;0===this.uploading&&(this.active=!1)},watchDrop:function(e){var t=e;if(this.features.drop){if(this.dropElement)try{document.removeEventListener("dragenter",this.onDragenter,!1),document.removeEventListener("dragleave",this.onDragleave,!1),document.removeEventListener("drop",this.onDocumentDrop,!1),this.dropElement.removeEventListener("dragover",this.onDragover,!1),this.dropElement.removeEventListener("drop",this.onDrop,!1)}catch(n){}t?"string"===typeof t?t=document.querySelector(t)||this.$root.$el.querySelector(t):!0===t&&(t=this.$parent.$el):t=!1,this.dropElement=t,this.dropElement&&(document.addEventListener("dragenter",this.onDragenter,!1),document.addEventListener("dragleave",this.onDragleave,!1),document.addEventListener("drop",this.onDocumentDrop,!1),this.dropElement.addEventListener("dragover",this.onDragover,!1),this.dropElement.addEventListener("drop",this.onDrop,!1))}},onDragenter:function(e){if(e.preventDefault(),!this.dropActive&&e.dataTransfer){var t=e.dataTransfer;t.files&&t.files.length?this.dropActive=!0:t.types?(t.types.indexOf&&-1!==t.types.indexOf("Files")||t.types.contains&&t.types.contains("Files"))&&(this.dropActive=!0):this.dropActive=!0}},onDragleave:function(e){e.preventDefault(),this.dropActive&&("HTML"===e.target.nodeName||e.target===e.explicitOriginalTarget||!e.fromElement&&(e.clientX<=0||e.clientY<=0||e.clientX>=window.innerWidth||e.clientY>=window.innerHeight))&&(this.dropActive=!1)},onDragover:function(e){e.preventDefault()},onDocumentDrop:function(){this.dropActive=!1},onDrop:function(e){e.preventDefault(),this.addDataTransfer(e.dataTransfer)}}},x="undefined"!==typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function w(e){return function(e,t){return $(e,t)}}var S=document.head||document.getElementsByTagName("head")[0],I={};function $(e,t){var n=x?t.media||"default":e,i=I[n]||(I[n]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);var r=t.source;if(t.map&&(r+="\n/*# sourceURL="+t.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",t.media&&i.element.setAttribute("media",t.media),S.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(r),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{var a=i.ids.size-1,o=document.createTextNode(r),s=i.element.childNodes;s[a]&&i.element.removeChild(s[a]),s.length?i.element.insertBefore(o,s[a]):i.element.appendChild(o)}}}var F=w,E=k,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{class:e.className},[e._t("default"),e._v(" "),n("label",{attrs:{for:e.inputId||e.name}}),e._v(" "),n("input-file")],2)},O=[],T=function(e){e&&e("data-v-76d380b6_0",{source:".file-uploads{overflow:hidden;position:relative;text-align:center;display:inline-block}.file-uploads.file-uploads-html4 input,.file-uploads.file-uploads-html5 label{background:#fff;opacity:0;font-size:20em;z-index:1;top:0;left:0;right:0;bottom:0;position:absolute;width:100%;height:100%}.file-uploads.file-uploads-html4 label,.file-uploads.file-uploads-html5 input{background:rgba(255,255,255,0);overflow:hidden;position:fixed;width:1px;height:1px;z-index:-1;opacity:0}",map:void 0,media:void 0})},j=void 0,D=void 0,N=!1,z=u({render:_,staticRenderFns:O},T,E,j,N,D,F,void 0),R=Object.freeze({default:z});function U(e){return e&&e["default"]||e}var P=U(R),L=P;return L}))}}]);
//# sourceMappingURL=datasetUpload-legacy.438d20d0.js.map